import{H as j,P as I,Q as L,q as w,R as E,u as W,J as k,U as D}from"./index-3QnHwW2k.js";function X(t,i){return I()?(L(t,i),!0):!1}const Y=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const q=Object.prototype.toString,F=t=>q.call(t)==="[object Object]",M=()=>{};function $(t){return Array.isArray(t)?t:[t]}function G(t,i,c){return j(t,i,{...c,immediate:!0})}const O=Y?window:void 0;function P(t){var i;const c=E(t);return(i=c?.$el)!==null&&i!==void 0?i:c}function b(...t){const i=[],c=()=>{i.forEach(n=>n()),i.length=0},d=(n,o,u,a)=>(n.addEventListener(o,u,a),()=>n.removeEventListener(o,u,a)),f=w(()=>{const n=$(E(t[0])).filter(o=>o!=null);return n.every(o=>typeof o!="string")?n:void 0}),g=G(()=>{var n,o;return[(n=(o=f.value)===null||o===void 0?void 0:o.map(u=>P(u)))!==null&&n!==void 0?n:[O].filter(u=>u!=null),$(E(f.value?t[1]:t[0])),$(W(f.value?t[2]:t[1])),E(f.value?t[3]:t[2])]},([n,o,u,a])=>{if(c(),!n?.length||!o?.length||!u?.length)return;const T=F(a)?{...a}:a;i.push(...n.flatMap(v=>o.flatMap(m=>u.map(p=>d(v,m,p,T)))))},{flush:"post"}),S=()=>{g(),c()};return X(c),S}function J(t,i,c={}){const{window:d=O,ignore:f=[],capture:g=!0,detectIframe:S=!1,controls:n=!1}=c;if(!d)return n?{stop:M,cancel:M,trigger:M}:M;let o=!0;const u=e=>E(f).some(s=>{if(typeof s=="string")return Array.from(d.document.querySelectorAll(s)).some(r=>r===e.target||e.composedPath().includes(r));{const r=P(s);return r&&(e.target===r||e.composedPath().includes(r))}});function a(e){const s=E(e);return s&&s.$.subTree.shapeFlag===16}function T(e,s){const r=E(e),h=r.$.subTree&&r.$.subTree.children;return h==null||!Array.isArray(h)?!1:h.some(A=>A.el===s.target||s.composedPath().includes(A.el))}const v=e=>{const s=P(t);if(e.target!=null&&!(!(s instanceof Element)&&a(t)&&T(t,e))&&!(!s||s===e.target||e.composedPath().includes(s))){if("detail"in e&&e.detail===0&&(o=!u(e)),!o){o=!0;return}i(e)}};let m=!1;const p=[b(d,"click",e=>{m||(m=!0,setTimeout(()=>{m=!1},0),v(e))},{passive:!0,capture:g}),b(d,"pointerdown",e=>{const s=P(t);o=!u(e)&&!!(s&&!e.composedPath().includes(s))},{passive:!0}),S&&b(d,"blur",e=>{setTimeout(()=>{var s;const r=P(t);((s=d.document.activeElement)===null||s===void 0?void 0:s.tagName)==="IFRAME"&&!r?.contains(d.document.activeElement)&&i(e)},0)},{passive:!0})].filter(Boolean),x=()=>p.forEach(e=>e());return n?{stop:x,cancel:()=>{o=!1},trigger:e=>{o=!0,v(e),o=!1}}:x}function N(t,i={}){const{threshold:c=50,onSwipe:d,onSwipeEnd:f,onSwipeStart:g,passive:S=!0}=i,n=k({x:0,y:0}),o=k({x:0,y:0}),u=w(()=>n.x-o.x),a=w(()=>n.y-o.y),{max:T,abs:v}=Math,m=w(()=>T(v(u.value),v(a.value))>=c),p=D(!1),x=w(()=>m.value?v(u.value)>v(a.value)?u.value>0?"left":"right":a.value>0?"up":"down":"none"),e=l=>[l.touches[0].clientX,l.touches[0].clientY],s=(l,y)=>{n.x=l,n.y=y},r=(l,y)=>{o.x=l,o.y=y},h={passive:S,capture:!S},A=l=>{p.value&&f?.(l,x.value),p.value=!1},R=[b(t,"touchstart",l=>{if(l.touches.length!==1)return;const[y,C]=e(l);s(y,C),r(y,C),g?.(l)},h),b(t,"touchmove",l=>{if(l.touches.length!==1)return;const[y,C]=e(l);r(y,C),h.capture&&!h.passive&&Math.abs(u.value)>Math.abs(a.value)&&l.preventDefault(),!p.value&&m.value&&(p.value=!0),p.value&&d?.(l)},h),b(t,["touchend","touchcancel"],A,h)];return{isSwiping:p,direction:x,coordsStart:n,coordsEnd:o,lengthX:u,lengthY:a,stop:()=>R.forEach(l=>l())}}export{N as a,J as o,P as u};
